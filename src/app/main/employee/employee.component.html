<div id="forms" class="page-layout simple fullwidth" fxLayout="column">
	<div class="content p-16 fullwidth">
		<div class="pt-16 pb-32" fxLayout="column" fxLayoutAlign="start" fxLayout.gt-md="row">
			<form class="mat-card mat-elevation-z4 p-24 pb-32 fullwidth" ngNativeValidate #myForm="ngForm" fxLayout="column"
				(ngSubmit)="onSubmit(myForm)" fxLayoutAlign="start" fxFlex="1 0 auto">
				<div class="h2 mb-24">Employee Details</div>
				<div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
					<mat-form-field fxFlex="33" appearance="outline">
						<mat-label>Employee Name</mat-label>
						<input type="text" matInput autocomplete="off" name="employeeName"
							[(ngModel)]="employeeName" placeholder="Employee Name" required>
						<mat-error>This field is required</mat-error>
					</mat-form-field>

					<mat-form-field fxFlex="33" appearance="outline">
						<mat-label>Employee Mobile</mat-label>
						<input type="number" matInput autocomplete="off" name="employeeMobile" [(ngModel)]="employeeMobile"
							placeholder="Employee Name" required>
						<mat-error>This field is required</mat-error>
					</mat-form-field>
		
					<mat-form-field fxFlex="33" appearance="outline">
						<mat-label>Date of Joining</mat-label>
						<input matInput [matDatepicker]="picker1" (focus)="picker1.open()" (click)="picker1.open()" autocomplete="off"
							name="doj" [(ngModel)]="doj" placeholder="Date of Joining" required>
						<mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
						<mat-datepicker #picker1></mat-datepicker>
						<mat-error>This field is required</mat-error>
					</mat-form-field>
				</div>
				<div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
					<mat-form-field fxFlex="33" appearance="outline">
						<mat-label>Department</mat-label>
						<mat-select placeholder="Select Department" [(ngModel)]="department" (ngModelChange)="departmentChange($event)"
							name="department" required>
							<ng-container *ngFor="let department of departmentData">
								<mat-option [value]="department.id">
									{{department.department_name}}
								</mat-option>
							</ng-container>
						</mat-select>
						<mat-error>This field is required</mat-error>
					</mat-form-field>
					<mat-form-field fxFlex="33" appearance="outline">
						<mat-label>Designation</mat-label>
						<mat-select placeholder="Select Designation" [(ngModel)]="designation" (ngModelChange)="designationChange($event)"
							name="designation" required>
							<ng-container *ngFor="let designation of filteredDesignation">
								<mat-option [value]="designation.id">
									{{designation.designation_name}}
								</mat-option>
							</ng-container>
						</mat-select>
						<mat-error>This field is required</mat-error>
					</mat-form-field>
					<mat-form-field fxFlex="33" appearance="outline">
						<mat-label>Wages Mode</mat-label>
						<mat-select placeholder="Select Wages Mode" [(ngModel)]="wageMode" name="wageMode" required>
							<ng-container *ngFor="let wageMode of filteredWages">
								<mat-option [value]="wageMode.id">
									{{wageMode.modes_name}}
								</mat-option>
							</ng-container>
						</mat-select>
						<mat-error>This field is required</mat-error>
					</mat-form-field>
				</div>
				<div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
					<mat-form-field fxFlex="33" appearance="outline">
						<mat-label>Aadhar Number</mat-label>
						<input type="number" matInput autocomplete="off" name="aadharNumber" [(ngModel)]="aadharNumber"
							placeholder="Aadhar Number" required>
						<mat-error>This field is required</mat-error>
					</mat-form-field>
					<mat-form-field fxFlex="33" appearance="outline">
						<mat-label>License Number</mat-label>
						<ng-container *ngIf="designation == 4" >
							<input type="text" matInput autocomplete="off" name="licenseNumber" [(ngModel)]="licenseNumber"
								placeholder="License Number" required>
						</ng-container>
						<ng-container *ngIf="designation != 4">
							<input type="text" matInput autocomplete="off" name="licenseNumber" [(ngModel)]="licenseNumber"
								placeholder="License Number">
						</ng-container>
						<mat-error>This field is required</mat-error>
					</mat-form-field>
					<ng-container *ngIf="licenseNumber && licenseNumber.length > 0">
						<mat-form-field fxFlex="33" appearance="outline">
							<mat-label>License Exp Date</mat-label>
							<input matInput [matDatepicker]="picker2" (focus)="picker2.open()" (click)="picker2.open()" autocomplete="off"
								name="licenseExpiry" [(ngModel)]="licenseExpiry" placeholder="License Exp Date" required>
							<mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
							<mat-datepicker #picker2></mat-datepicker>
							<mat-error>This field is required</mat-error>
						</mat-form-field>
					</ng-container>
				</div>
				<div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
					<mat-form-field fxFlex="33" appearance="outline">
						<mat-label>Address</mat-label>
						<textarea style="resize: none;" name="address" [(ngModel)]="address" matInput placeholder="Address"></textarea>
					</mat-form-field>
				</div>
				<div class="h2 mb-24">Emergency Contact Details</div>
				<div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
					<mat-form-field fxFlex="33" appearance="outline">
						<mat-label>Contact Name</mat-label>
						<input type="text" matInput autocomplete="off" name="contactName" [(ngModel)]="contactName"
							placeholder="Contact Name" required>
						<mat-error>This field is required</mat-error>
					</mat-form-field>
					<mat-form-field fxFlex="33" appearance="outline">
						<mat-label>Contact Mobile</mat-label>
						<input type="number" matInput autocomplete="off" name="contactMobile" [(ngModel)]="contactMobile"
							placeholder="Contact Mobile" required>
						<mat-error>This field is required</mat-error>
					</mat-form-field>
					<mat-form-field fxFlex="33" appearance="outline">
						<mat-label>Relationship</mat-label>
						<input type="text" matInput autocomplete="off" name="contactRelation" [(ngModel)]="contactRelation"
							placeholder="Relationship" required>
						<mat-error>This field is required</mat-error>
					</mat-form-field>
				</div>
				<div class="h2 mb-24">Experience Details</div>
				<div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
					<mat-form-field fxFlex="33" appearance="outline">
						<mat-label>Experience</mat-label>
						<mat-select placeholder="Select Experience" [(ngModel)]="experience" name="experience" required>
							<mat-option value="1">Fresher</mat-option>
							<mat-option value="2">Experienced</mat-option>
						</mat-select>
					</mat-form-field>
					<mat-form-field *ngIf="experience == 2" fxFlex="33" appearance="outline">
						<mat-label>Years of Experience</mat-label>
						<input type="number" matInput autocomplete="off" name="yearsExperience" [(ngModel)]="yearsExperience"
							placeholder="Years of Experience" required>
						<mat-error>This field is required</mat-error>
					</mat-form-field>
					<mat-form-field *ngIf="experience == 2" fxFlex="33" appearance="outline">
						<mat-label>Previous Employer</mat-label>
						<input type="text" matInput autocomplete="off" name="previousEmployer" [(ngModel)]="previousEmployer"
							placeholder="Previous Employer" required>
						<mat-error>This field is required</mat-error>
					</mat-form-field>
				</div>
				<div class="h2 mb-24">Salary Details</div>
				<div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
					<div fxFlex="25">
						<mat-slide-toggle>On Payroll</mat-slide-toggle>
					</div>
				</div>
				<div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
					<mat-form-field fxFlex="25" appearance="outline">
						<mat-label>Salary</mat-label>
						<input type="number" matInput autocomplete="off" name="salary" [(ngModel)]="salary"
							placeholder="Salary" required>
						<mat-error>This field is required</mat-error>
					</mat-form-field>
					<mat-form-field fxFlex="25" appearance="outline">
						<mat-label>Salary Advance</mat-label>
						<input type="number" matInput autocomplete="off" name="salaryAdvance" [(ngModel)]="salaryAdvance" placeholder="Salary Advance">
						<mat-error>This field is required</mat-error>
					</mat-form-field>
					<mat-form-field fxFlex="25" appearance="outline">
						<mat-label>Advance amount</mat-label>
						<input type="number" matInput autocomplete="off" name="advanceAmount" [(ngModel)]="advanceAmount" placeholder="Advance amount">
						<mat-error>This field is required</mat-error>
					</mat-form-field>
					<mat-form-field fxFlex="25" appearance="outline">
						<mat-label>Commision Amount</mat-label>
						<input type="number" matInput autocomplete="off" name="commisionAmount" [(ngModel)]="commisionAmount"
							placeholder="Commision Amount">
						<mat-error>This field is required</mat-error>
					</mat-form-field>
				</div>
				<div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
					<mat-form-field fxFlex="33" appearance="outline">
						<mat-label>Policy Number </mat-label>
						<input type="text" matInput autocomplete="off" name="policyNumber" [(ngModel)]="policyNumber"
							placeholder="Policy Number " >
						<mat-error>This field is required</mat-error>
					</mat-form-field>
					<mat-form-field fxFlex="33" appearance="outline">
						<mat-label>Insurance Policy Company</mat-label>
						<input type="text" matInput autocomplete="off" name="insurancePolicyCompany" [(ngModel)]="insurancePolicyCompany"
							placeholder="Insurance Policy Company">
						<mat-error>This field is required</mat-error>
					</mat-form-field>
				</div>
				<div class="h2 mb-24">Bank Details</div>
				<div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
					<mat-form-field fxFlex="33" appearance="outline">
						<mat-label>Bank A/c Number</mat-label>
						<input type="text" matInput autocomplete="off" name="accountNumber" [(ngModel)]="accountNumber"
							placeholder="Bank A/c Number">
						<mat-error>This field is required</mat-error>
					</mat-form-field>
					<mat-form-field fxFlex="33" appearance="outline">
						<mat-label>Bank Name</mat-label>
						<input type="text" matInput autocomplete="off" name="bankName" [(ngModel)]="bankName"
							placeholder="Bank Name">
						<mat-error>This field is required</mat-error>
					</mat-form-field>
					<mat-form-field fxFlex="33" appearance="outline">
						<mat-label>Bank Branch Name</mat-label>
						<input type="text" matInput autocomplete="off" name="branchName" [(ngModel)]="branchName"
							placeholder="Bank Branch Name">
						<mat-error>This field is required</mat-error>
					</mat-form-field>
				</div>
				<div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
					<mat-form-field fxFlex="33" appearance="outline">
						<mat-label>Bank IFSC Code Number</mat-label>
						<input type="text" matInput autocomplete="off" name="ifscNumber" [(ngModel)]="ifscNumber"
							placeholder="Bank IFSC Code Number">
						<mat-error>This field is required</mat-error>
					</mat-form-field>
				</div>
				<div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
						<div style="width: 50%;">
							<mat-label>Image</mat-label>
							<input #imageInput type="file" autocomplete="off" placeholder="Image" accept="image/*" (change)="uploadedFile($event)" required="{{!imageUrl	?true :null}}">
						</div>
						<div style="width: 50%;">
							<img *ngIf="imageUrl" class="image-preview" [src]="imageUrl">	
						</div>	
				</div>
				<div align="center">
					<button mat-raised-button color="accent" class="submit-button"
						aria-label="Submit">{{employeeBtnText}}</button>
				</div>
			</form>
		</div>
		<div class="mat-elevation-z8 fuse-card auto-width p-8" fxLayout="column" fxLayoutAlign="center center"
			fxLayout.gt-xs="row" fxLayoutAlign.gt-xs="center center">
			<mat-form-field appearance="outline" class="noPaddingBottom">
				<input matInput (keyup)="applyFilter($event.target.value)" autocomplete="off" placeholder="Employee Name">
			</mat-form-field>
		</div>
		<div class="pt-16 pb-32" fxLayout="column" fxLayoutAlign="start" fxLayout.gt-md="row">
			<table mat-table [dataSource]="dataSource">
		
				<ng-container matColumnDef="sno">
					<th mat-header-cell *matHeaderCellDef>S.No. </th>
					<td mat-cell *matCellDef="let row;let i=index;"> {{ i + 1 }} </td>
				</ng-container>
		
				<ng-container matColumnDef="department_name">
					<th mat-header-cell *matHeaderCellDef>Department Name </th>
					<td mat-cell *matCellDef="let row"> {{" "+getDepartmentName(row.department_id)}} </td>
				</ng-container>
		
				<ng-container matColumnDef="designation_name">
					<th mat-header-cell *matHeaderCellDef>Designation Name </th>
					<td mat-cell *matCellDef="let row"> {{" "+getDesignationName(row.designation_id)}} </td>
				</ng-container>
		
				<ng-container matColumnDef="employee_name">
					<th mat-header-cell *matHeaderCellDef>Employee Name </th>
					<td mat-cell *matCellDef="let row"> {{row.employee_name}} </td>
				</ng-container>
		
				<ng-container matColumnDef="doj">
					<th mat-header-cell *matHeaderCellDef>Date of Joining </th>
					<td mat-cell *matCellDef="let row"> {{row.doj}} </td>
				</ng-container>

				<ng-container matColumnDef="advance">
					<th mat-header-cell *matHeaderCellDef>Advance</th>
					<td mat-cell *matCellDef="let row"> {{row.advance_amount}} </td>
				</ng-container>

				<ng-container matColumnDef="salary_advance">
					<th mat-header-cell *matHeaderCellDef>Salary Advance</th>
					<td mat-cell *matCellDef="let row"> {{row.salary_advance}} </td>
				</ng-container>

				<ng-container matColumnDef="salary">
					<th mat-header-cell *matHeaderCellDef>Salary</th>
					<td mat-cell *matCellDef="let row"> {{row.salary}} </td>
				</ng-container>

				<ng-container matColumnDef="action">
					<th mat-header-cell *matHeaderCellDef> Action </th>
					<td mat-cell *matCellDef="let row">
						<div style="display: flex;justify-content: center;">
							<button type="button" mat-icon-button color="accent" title="Edit" (click)="edit(row)">
								<mat-icon>edit</mat-icon>
							</button>
							<button mat-icon-button type="button" class="actionBtn" color="accent" title="Delete" (click)="delete(row)">
								<mat-icon>delete</mat-icon>
							</button>
						</div>
					</td>
				</ng-container>
		
				<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
				<tr mat-row *matRowDef="let row; columns: displayedColumns;">
				</tr>
			</table>
		</div>
		<mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
	</div>
</div>